{"version":3,"file":"setup-CpqsOPQC.js","sources":["../../../../packages/dixipro/magicpro/admin/js/app/Setup/component/EditString.vue","../../../../packages/dixipro/magicpro/admin/js/app/Setup/component/EditBoolean.vue","../../../../packages/dixipro/magicpro/admin/js/app/Setup/component/DeleteButton.vue","../../../../packages/dixipro/magicpro/admin/js/app/Setup/component/EditArray.vue","../../../../packages/dixipro/magicpro/admin/js/app/Setup/Setup.vue","../../../../packages/dixipro/magicpro/admin/js/setup.js"],"sourcesContent":["<script setup>\nimport { ref, computed, onMounted, onUnmounted, watch, useId, toRaw, unref } from 'vue';\n\nconst props = defineProps({\n  defaultValue: { type: String, required: true },\n  mutable: { type: Boolean, required: true },\n});\n\nconst value = defineModel();\n</script>\n\n<template>\n  <div>\n    <input type=\"text\" class=\"form-control form-sm\" v-model=\"value\" :disabled=\"!mutable\" />\n  </div>\n  <div v-if=\"mutable\">\n    <small>{{ defaultValue }}</small>\n  </div>\n</template>\n","<script setup>\nimport { ref, computed, onMounted, onUnmounted, watch, useId, toRaw, unref } from 'vue';\n\nconst props = defineProps({\n  defaultValue: { type: Boolean, required: true },\n  mutable: { type: Boolean, required: true },\n});\n\nconst value = defineModel();\n</script>\n\n<template>\n  <div>\n    <ToggleSwitch v-model=\"value\" :disabled=\"!mutable\" />\n  </div>\n  <div v-if=\"mutable\">\n    <small>{{ defaultValue }}</small>\n  </div>\n</template>\n","<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\n\nonMounted(() => {\n  window.addEventListener('keydown', onKey);\n});\n\nonUnmounted(() => {\n  window.removeEventListener('keydown', onKey);\n});\n\nfunction onKey(e) {\n  if (e.key === 'Escape') {\n    confirm.value = false;\n    dubleclick.value = false;\n  }\n}\n\nconst props = defineProps({\n  action: Function, // async функция\n});\n\nconst confirm = ref(false);\nconst dubleclick = ref(false);\n\nasync function handleClick() {\n  if (confirm.value && dubleclick.value) {\n    props.action();\n    confirm.value = false;\n    dubleclick.value = false;\n    return;\n  }\n  confirm.value = true;\n\n  setTimeout(() => {\n    dubleclick.value = true;\n  }, 500);\n}\n</script>\n\n<template>\n  <div style=\"display: inline-block\">\n    <button v-if=\"confirm\" @click=\"confirm = !confirm\" class=\"fas fa-times btn btn-sm\"></button>\n    <button @click=\"handleClick\" class=\"fas fa-trash btn btn-sm\"></button>\n  </div>\n</template>\n","<script setup>\nimport { ref, computed, onMounted, onUnmounted, watch, useId, toRaw, unref } from 'vue';\nimport DeleteButton from './DeleteButton.vue';\n\nconst props = defineProps({\n  defaultValue: { type: Array, required: true },\n  mutable: { type: Boolean, required: true },\n});\n\nconst inputArray = defineModel();\n\nfunction deleteKey(key) {\n  inputArray.value.splice(key, 1);\n}\n\nfunction addNew() {\n  if (!newElement.value.trim()) {\n    return;\n  }\n  inputArray.value.push(newElement.value);\n  newElement.value = '';\n}\n\nconst newElement = ref('');\n</script>\n\n<template>\n  <div v-for=\"(val, key) in inputArray\" :key=\"key\" class=\"row my-1\">\n    <div class=\"col-12\">\n      <div class=\"input-group input-group-sm\">\n        <input type=\"text\" class=\"form-control form-sm\" v-model=\"inputArray[key]\" :disabled=\"!mutable\" />\n        <DeleteButton :action=\"() => deleteKey(key)\"></DeleteButton>\n        <!-- <button\n          class=\"fas fa-trash pointer btn btn-sm\"\n          @click=\"deleteKey(key)\"\n        ></button> -->\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row my-1\">\n    <div class=\"col-12\">\n      <div class=\"input-group input-group-sm\">\n        <input type=\"text\" class=\"form-control form-sm\" v-model=\"newElement\" :disabled=\"!mutable\" />\n\n        <button class=\"btn btn-sm fas fa-plus pointer\" @click=\"addNew()\"></button>\n      </div>\n    </div>\n  </div>\n</template>\n","<script setup>\nimport { ref, computed, isProxy, isReactive, onMounted, onUnmounted, nextTick, watch, useId, toRaw, unref } from 'vue';\nimport { apiSetup, apiCall } from '../apiCall';\n\nimport TosatConfirm from '../CommonCom/ToastConfirm.vue';\n\nimport EditString from './component/EditString.vue';\nimport EditBoolean from './component/EditBoolean.vue';\nimport EditArray from './component/EditArray.vue';\n\nconst paramsAttr = ref({});\nconst iniParams = ref({});\nconst ready = ref(false);\n\nonMounted(() => {\n  getIniParams();\n});\n\nonUnmounted(() => {});\n\nasync function getIniParams() {\n  paramsAttr.value = await apiSetup({\n    command: 'getParamsAttr',\n  });\n\n  iniParams.value = await apiSetup({\n    command: 'getIniParams',\n  });\n  await nextTick();\n  ready.value = true;\n}\n\nasync function saveParams() {\n  if (!(await document.confirmDialog('Сохранить?'))) {\n    return;\n  }\n  iniParams.value = await apiSetup({\n    command: 'saveIniParams',\n    allVars: iniParams.value,\n  });\n  document.showToast('Сохранено');\n\n  await getIniParams();\n}\n</script>\n\n<template>\n  <h1>Setup 0.1</h1>\n\n  <div v-if=\"ready\">\n    <div class=\"row my-3\" v-for=\"(value, key) in paramsAttr\" :key=\"key\">\n      <div class=\"col-3\">\n        <div><strong v-text=\"key\"></strong></div>\n        <div style=\"line-height: 1\">\n          <small v-text=\"value.label\"></small>\n        </div>\n      </div>\n      <div class=\"col-md-5\">\n        <EditString\n          v-if=\"value.type == 'localpath' || value.type == 'string'\"\n          v-model=\"iniParams[key]\"\n          :defaultValue=\"value.default\"\n          :mutable=\"value.mutable\"\n        ></EditString>\n        <EditBoolean v-if=\"value.type == 'boolean'\" v-model=\"iniParams[key]\" :defaultValue=\"value.default\" :mutable=\"value.mutable\"></EditBoolean>\n        <EditArray v-if=\"value.type == 'array'\" v-model=\"iniParams[key]\" :defaultValue=\"value.default\" :mutable=\"value.mutable\"></EditArray>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-3\"></div>\n      <div class=\"col-md-5\"><button class=\"btn btn-sm btn-success\" @click=\"saveParams\">Сохранить</button></div>\n    </div>\n  </div>\n\n  <pre>\n      {{ JSON.stringify(iniParams, null, 2) }}\n      </pre\n  >\n\n  paramsAttr\n  <pre>\n      {{ JSON.stringify(paramsAttr, null, 2) }}\n      </pre\n  >\n  <TosatConfirm></TosatConfirm>\n</template>\n\n<style>\n.pointer {\n  cursor: pointer;\n}\n</style>\n","import { createApp } from 'vue';\n\nimport PrimeVue from 'primevue/config';\nimport Aura from '@primeuix/themes/aura';\nimport 'primeicons/primeicons.css';\n\nimport ToastService from 'primevue/toastservice';\nimport Toast from 'primevue/toast';\nimport ConfirmDialog from 'primevue/confirmdialog';\nimport ConfirmationService from 'primevue/confirmationservice';\nimport Dialog from 'primevue/dialog';\nimport Splitter from 'primevue/splitter';\nimport SplitterPanel from 'primevue/splitterpanel';\nimport ContextMenu from 'primevue/contextmenu';\nimport Drawer from 'primevue/drawer';\nimport FileUpload from 'primevue/fileupload';\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport ToggleSwitch from 'primevue/toggleswitch';\n\nconst components = [\n  //\n  ToastService,\n  Toast,\n  ConfirmDialog,\n  Dialog,\n  Splitter,\n  SplitterPanel,\n  ContextMenu,\n  Drawer,\n  FileUpload,\n  InputText,\n  ToggleSwitch,\n];\n\nimport Setup from './app/Setup/Setup.vue';\nconst app = createApp(Setup);\n\n// регистрац компонентов\ncomponents.forEach((component) => {\n  app.component(component.name, component);\n});\n\napp.use(PrimeVue, {\n  theme: {\n    preset: Aura,\n    options: {\n      cssLayer: { name: 'primevue', order: 'theme, base, primevue' },\n    },\n  },\n});\n\napp.use(ConfirmationService);\napp.use(ToastService);\n\napp.mount('#setup');\n"],"names":["value","_useModel","_createElementVNode","$event","__props","_createElementBlock","_hoisted_2","_createVNode","_component_ToggleSwitch","_hoisted_1","onMounted","onKey","onUnmounted","e","confirm","dubleclick","props","ref","handleClick","_openBlock","_cache","inputArray","deleteKey","key","addNew","newElement","_Fragment","_renderList","val","_vModelText","DeleteButton","_hoisted_4","_hoisted_5","_hoisted_6","paramsAttr","iniParams","ready","getIniParams","apiSetup","nextTick","saveParams","_toDisplayString","_createBlock","EditString","EditBoolean","EditArray","TosatConfirm","components","ToastService","Toast","ConfirmDialog","Dialog","Splitter","SplitterPanel","ContextMenu","Drawer","FileUpload","InputText","ToggleSwitch","app","createApp","Setup","component","PrimeVue","Aura","ConfirmationService"],"mappings":"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"}