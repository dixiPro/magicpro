import{u as L,r as p,z as S,K as B,j as F,b as c,o as d,d as e,m as x,F as k,i as M,g as r,f as y,l as I,e as U,q as P,w as _,v as h,_ as Q,$ as R,L as j,T as $,M as q,N as z,O as K,P as O,Q as W,R as X,S as Y,U as G,V as H,W as J,X as Z,Y as ee}from"./translate-DYXq8MLH.js";import{s as te}from"./index-DIBRef73.js";const se={class:"container my-3"},ae={class:"col-1"},oe=["onClick"],ne={class:"col-1"},le=["textContent"],re={class:"col-2"},ie=["textContent"],ce={class:"col-2"},de=["textContent"],ue={class:"col-2"},me=["textContent"],ve={class:"col-2"},pe=["textContent"],_e={key:0,class:"col-1"},he=["onClick"],fe={class:"my-3 text-center"},we={class:"my-2"},be={class:"my-2"},ye={class:"my-2"},Ue={__name:"EditUsers",setup(f){const{t:l}=L(),i=p([]),w=p(!1),n=p({name:"newUser",email:"barsik@barsik.com",password:"1234",role:"user"});let C=0;const o=p({show:!1,mode:null,header:null,button:null});async function m(t){const s="/a_dmin/api/editUsers";if(!w.value)try{return w.value=!0,(await R({url:s,data:t,logResult:!1})).data}catch(v){throw document.showToast(v,"error"),new Error(l("error"))}finally{w.value=!1}}async function g(){try{i.value=(await m({command:"getUserList",data:{}})).map(t=>(t.edit=!1,t)),document.showToast(l("user_list_loaded"))}catch{}}async function V(){if(await document.confirmDialog(l("save")))try{const t=await m({command:"editUser",data:n.value});t.edit=!1,console.log(t),i.value[C]=t,n.value=t,document.showToast(l("saved"))}catch{}}async function T(t){if(await document.confirmDialog(l("delete")))try{const s=await m({command:"deleteUser",data:{id:i.value[t].id}});i.value.splice(t,1)}catch{}}function D(t){C=t,n.value=i.value[t],o.value.show=!0,o.value.header=l("edit"),o.value.mode="edit",o.value.header=l("save")}function E(){n.value={name:"newUser",email:"barsik@barsik.com",password:"1234",role:"user"},o.value.show=!0,o.value.header=l("create"),o.value.mode="add",o.value.header=l("create")}async function N(){try{const t=await m({command:"addUser",data:n.value});t.edit=!1,i.value.push(t),o.value.show=!1}catch{}}return S(()=>{g()}),B(()=>{}),(t,s)=>{const v=F("Dialog");return d(),c(k,null,[e("div",se,[(d(!0),c(k,null,M(i.value,(a,b)=>(d(),c("div",{key:b,class:"row my-2"},[e("div",ae,[e("button",{onClick:A=>D(b),class:"fas fa-edit btn btn-sm btn-success"},null,8,oe)]),e("div",ne,[e("span",{textContent:r(a.id)},null,8,le)]),e("div",re,[e("span",{textContent:r(a.name)},null,8,ie)]),e("div",ce,[e("span",{textContent:r(a.email)},null,8,de)]),e("div",ue,[e("span",{textContent:r(a.password)},null,8,me)]),e("div",ve,[e("span",{textContent:r(a.role)},null,8,pe)]),a.edit?U("",!0):(d(),c("div",_e,[e("button",{class:"fas fa-trash btn btn-sm btn-success",onClick:A=>T(b)},null,8,he)]))]))),128)),e("div",fe,[e("button",{class:"btn btn-sm btn-success",onClick:s[0]||(s[0]=a=>E())},r(y(l)("add")),1)])]),x(v,{visible:o.value.show,"onUpdate:visible":s[5]||(s[5]=a=>o.value.show=a),header:o.value.header,modal:"",style:{width:"400px"}},{default:I(()=>[e("div",null,[s[6]||(s[6]=P("name ",-1)),_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=a=>n.value.name=a),placeholder:"name"},null,512),[[h,n.value.name]])]),e("div",we,[_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=a=>n.value.email=a),placeholder:"email"},null,512),[[h,n.value.email]])]),e("div",be,[_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=a=>n.value.password=a),placeholder:"password"},null,512),[[h,n.value.password]])]),e("div",ye,[_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=a=>n.value.role=a),placeholder:"password"},null,512),[[h,n.value.role]])]),o.value.mode==="add"?(d(),c("button",{key:0,class:"btn btn-sm btn-success",onClick:N},r(y(l)("create")),1)):U("",!0),o.value.mode==="edit"?(d(),c("button",{key:1,class:"btn btn-sm btn-success",onClick:V},r(y(l)("save")),1)):U("",!0)]),_:1},8,["visible","header"]),x(Q)],64)}}},Ce=[$,q,z,K,O,W,X,Y,G,te],u=j(Ue);Ce.forEach(f=>{u.component(f.name,f)});u.use(H,{theme:{preset:J,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});u.use(Z);u.use($);u.use(ee);u.mount("#edit_users");
