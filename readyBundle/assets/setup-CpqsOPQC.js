import{J as h,L as x,l as r,p as o,q as e,s as p,v as g,x as w,B as v,F as b,C as E,G as k,M as C,X as S,r as f,A as U,ab as y,n as A,H as M,D as $,Y as T,Z as B,_ as q,$ as N,a0 as P,a1 as D,a2 as L,a3 as F,a4 as I,a5 as J,a6 as K,a7 as O,a8 as G}from"./apiCall-DgoSpTMN.js";import{s as H}from"./index-X9EClXNl.js";import{s as Q}from"./index-CVxEeueg.js";import{_ as X}from"./ToastConfirm-BbyfyvMA.js";const Y=["disabled"],Z={key:0},j={__name:"EditString",props:h({defaultValue:{type:String,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const a=x(t,"modelValue");return(u,l)=>(o(),r(b,null,[e("div",null,[g(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s),disabled:!t.mutable},null,8,Y),[[w,a.value]])]),t.mutable?(o(),r("div",Z,[e("small",null,v(t.defaultValue),1)])):p("",!0)],64))}},z={key:0},R={__name:"EditBoolean",props:h({defaultValue:{type:Boolean,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const a=x(t,"modelValue");return(u,l)=>{const s=E("ToggleSwitch");return o(),r(b,null,[e("div",null,[k(s,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=m=>a.value=m),disabled:!t.mutable},null,8,["modelValue","disabled"])]),t.mutable?(o(),r("div",z,[e("small",null,v(t.defaultValue),1)])):p("",!0)],64)}}},W={style:{display:"inline-block"}},ee={__name:"DeleteButton",props:{action:Function},setup(t){C(()=>{window.addEventListener("keydown",a)}),S(()=>{window.removeEventListener("keydown",a)});function a(c){c.key==="Escape"&&(l.value=!1,s.value=!1)}const u=t,l=f(!1),s=f(!1);async function m(){if(l.value&&s.value){u.action(),l.value=!1,s.value=!1;return}l.value=!0,setTimeout(()=>{s.value=!0},500)}return(c,i)=>(o(),r("div",W,[l.value?(o(),r("button",{key:0,onClick:i[0]||(i[0]=n=>l.value=!l.value),class:"fas fa-times btn btn-sm"})):p("",!0),e("button",{onClick:m,class:"fas fa-trash btn btn-sm"})]))}},te={class:"col-12"},ae={class:"input-group input-group-sm"},le=["onUpdate:modelValue","disabled"],se={class:"row my-1"},ne={class:"col-12"},ue={class:"input-group input-group-sm"},oe=["disabled"],ie={__name:"EditArray",props:h({defaultValue:{type:Array,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const a=x(t,"modelValue");function u(m){a.value.splice(m,1)}function l(){s.value.trim()&&(a.value.push(s.value),s.value="")}const s=f("");return(m,c)=>(o(),r(b,null,[(o(!0),r(b,null,U(a.value,(i,n)=>(o(),r("div",{key:n,class:"row my-1"},[e("div",te,[e("div",ae,[g(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":d=>a.value[n]=d,disabled:!t.mutable},null,8,le),[[w,a.value[n]]]),k(ee,{action:()=>u(n)},null,8,["action"])])])]))),128)),e("div",se,[e("div",ne,[e("div",ue,[g(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":c[0]||(c[0]=i=>s.value=i),disabled:!t.mutable},null,8,oe),[[w,s.value]]),e("button",{class:"btn btn-sm fas fa-plus pointer",onClick:c[1]||(c[1]=i=>l())})])])])],64))}},re={key:0},de={class:"col-3"},me=["textContent"],ce={style:{"line-height":"1"}},pe=["textContent"],ve={class:"col-md-5"},fe={__name:"Setup",setup(t){const a=f({}),u=f({}),l=f(!1);C(()=>{s()}),S(()=>{});async function s(){a.value=await y({command:"getParamsAttr"}),u.value=await y({command:"getIniParams"}),await A(),l.value=!0}async function m(){await document.confirmDialog("Сохранить?")&&(u.value=await y({command:"saveIniParams",allVars:u.value}),document.showToast("Сохранено"),await s())}return(c,i)=>(o(),r(b,null,[i[1]||(i[1]=e("h1",null,"Setup 0.1",-1)),l.value?(o(),r("div",re,[(o(!0),r(b,null,U(a.value,(n,d)=>(o(),r("div",{class:"row my-3",key:d},[e("div",de,[e("div",null,[e("strong",{textContent:v(d)},null,8,me)]),e("div",ce,[e("small",{textContent:v(n.label)},null,8,pe)])]),e("div",ve,[n.type=="localpath"||n.type=="string"?(o(),$(j,{key:0,modelValue:u.value[d],"onUpdate:modelValue":V=>u.value[d]=V,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0),n.type=="boolean"?(o(),$(R,{key:1,modelValue:u.value[d],"onUpdate:modelValue":V=>u.value[d]=V,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0),n.type=="array"?(o(),$(ie,{key:2,modelValue:u.value[d],"onUpdate:modelValue":V=>u.value[d]=V,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0)])]))),128)),e("div",{class:"row"},[i[0]||(i[0]=e("div",{class:"col-3"},null,-1)),e("div",{class:"col-md-5"},[e("button",{class:"btn btn-sm btn-success",onClick:m},"Сохранить")])])])):p("",!0),e("pre",null,"      "+v(JSON.stringify(u.value,null,2))+`
      `,1),i[2]||(i[2]=M(" paramsAttr ",-1)),e("pre",null,"      "+v(JSON.stringify(a.value,null,2))+`
      `,1),k(X)],64))}},be=[B,q,N,P,D,L,F,I,J,Q,H],_=T(fe);be.forEach(t=>{_.component(t.name,t)});_.use(K,{theme:{preset:O,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});_.use(G);_.use(B);_.mount("#setup");
