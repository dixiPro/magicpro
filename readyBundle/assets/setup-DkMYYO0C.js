import{U as q,V as E,M as C,C as h,l as i,p as u,G as V,F as f,J as k,L as T,q as e,s as p,v as w,x,B as v,X as U,r as _,A as S,ab as $,n as A,H as D,D as g,Y as M,Z as B,_ as P,$ as L,a0 as N,a1 as j,a2 as F,a3 as I,a4 as J,a5 as K,a6 as O,a7 as G,a8 as H}from"./apiCall-DgoSpTMN.js";import{s as Q}from"./index-X9EClXNl.js";import{s as X}from"./index-CVxEeueg.js";const Y={__name:"ToastConfirm",setup(l){const s=q(),o=E();return C(()=>{document.showToast=(a="",t="success")=>{const r=t==="success"?5e3:6e4;s.add({severity:t,detail:a,life:r}),t==="error"&&console.log(a)},document.confirmDialog=async a=>new Promise((t,r)=>{o.require({message:a,header:"",icon:"fas fa-question",acceptLabel:"Да",rejectLabel:"Нет",accept:()=>t(!0),reject:()=>t(!1)})})}),(a,t)=>{const r=h("Toast"),c=h("ConfirmDialog");return u(),i(f,null,[V(r,{position:"top-right"}),V(c)],64)}}},Z=["disabled"],z={key:0},R={__name:"EditString",props:k({defaultValue:{type:String,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=T(l,"modelValue");return(o,a)=>(u(),i(f,null,[e("div",null,[w(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),disabled:!l.mutable},null,8,Z),[[x,s.value]])]),l.mutable?(u(),i("div",z,[e("small",null,v(l.defaultValue),1)])):p("",!0)],64))}},W={key:0},ee={__name:"EditBoolean",props:k({defaultValue:{type:Boolean,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=T(l,"modelValue");return(o,a)=>{const t=h("ToggleSwitch");return u(),i(f,null,[e("div",null,[V(t,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),disabled:!l.mutable},null,8,["modelValue","disabled"])]),l.mutable?(u(),i("div",W,[e("small",null,v(l.defaultValue),1)])):p("",!0)],64)}}},te={style:{display:"inline-block"}},ae={__name:"DeleteButton",props:{action:Function},setup(l){C(()=>{window.addEventListener("keydown",s)}),U(()=>{window.removeEventListener("keydown",s)});function s(c){c.key==="Escape"&&(a.value=!1,t.value=!1)}const o=l,a=_(!1),t=_(!1);async function r(){if(a.value&&t.value){o.action(),a.value=!1,t.value=!1;return}a.value=!0,setTimeout(()=>{t.value=!0},500)}return(c,d)=>(u(),i("div",te,[a.value?(u(),i("button",{key:0,onClick:d[0]||(d[0]=n=>a.value=!a.value),class:"fas fa-times btn btn-sm"})):p("",!0),e("button",{onClick:r,class:"fas fa-trash btn btn-sm"})]))}},le={class:"col-12"},se={class:"input-group input-group-sm"},oe=["onUpdate:modelValue","disabled"],ne={class:"row my-1"},ue={class:"col-12"},ie={class:"input-group input-group-sm"},re=["disabled"],de={__name:"EditArray",props:k({defaultValue:{type:Array,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=T(l,"modelValue");function o(r){s.value.splice(r,1)}function a(){t.value.trim()&&(s.value.push(t.value),t.value="")}const t=_("");return(r,c)=>(u(),i(f,null,[(u(!0),i(f,null,S(s.value,(d,n)=>(u(),i("div",{key:n,class:"row my-1"},[e("div",le,[e("div",se,[w(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":m=>s.value[n]=m,disabled:!l.mutable},null,8,oe),[[x,s.value[n]]]),V(ae,{action:()=>o(n)},null,8,["action"])])])]))),128)),e("div",ne,[e("div",ue,[e("div",ie,[w(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":c[0]||(c[0]=d=>t.value=d),disabled:!l.mutable},null,8,re),[[x,t.value]]),e("button",{class:"btn btn-sm fas fa-plus pointer",onClick:c[1]||(c[1]=d=>a())})])])])],64))}},ce={key:0},me={class:"col-3"},pe=["textContent"],fe={style:{"line-height":"1"}},ve=["textContent"],_e={class:"col-md-5"},be={__name:"Setup",setup(l){const s=_({}),o=_({}),a=_(!1);C(()=>{t()}),U(()=>{});async function t(){s.value=await $({command:"getParamsAttr"}),o.value=await $({command:"getIniParams"}),await A(),a.value=!0}async function r(){await document.confirmDialog("Сохранить?")&&(o.value=await $({command:"saveIniParams",allVars:o.value}),document.showToast("Сохранено"),await t())}return(c,d)=>(u(),i(f,null,[d[1]||(d[1]=e("h1",null,"Setup 0.1",-1)),a.value?(u(),i("div",ce,[(u(!0),i(f,null,S(s.value,(n,m)=>(u(),i("div",{class:"row my-3",key:m},[e("div",me,[e("div",null,[e("strong",{textContent:v(m)},null,8,pe)]),e("div",fe,[e("small",{textContent:v(n.label)},null,8,ve)])]),e("div",_e,[n.type=="localpath"||n.type=="string"?(u(),g(R,{key:0,modelValue:o.value[m],"onUpdate:modelValue":b=>o.value[m]=b,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0),n.type=="boolean"?(u(),g(ee,{key:1,modelValue:o.value[m],"onUpdate:modelValue":b=>o.value[m]=b,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0),n.type=="array"?(u(),g(de,{key:2,modelValue:o.value[m],"onUpdate:modelValue":b=>o.value[m]=b,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0)])]))),128)),e("div",{class:"row"},[d[0]||(d[0]=e("div",{class:"col-3"},null,-1)),e("div",{class:"col-md-5"},[e("button",{class:"btn btn-sm btn-success",onClick:r},"Сохранить")])])])):p("",!0),e("pre",null,"      "+v(JSON.stringify(o.value,null,2))+`
      `,1),d[2]||(d[2]=D(" paramsAttr ",-1)),e("pre",null,"      "+v(JSON.stringify(s.value,null,2))+`
      `,1),V(Y)],64))}},Ve=[B,P,L,N,j,F,I,J,K,X,Q],y=M(be);Ve.forEach(l=>{y.component(l.name,l)});y.use(O,{theme:{preset:G,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});y.use(H);y.use(B);y.mount("#setup");
