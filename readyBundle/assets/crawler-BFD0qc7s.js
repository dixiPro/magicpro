import{V as $,W as S,P as x,X as C,b,c as n,o as c,a as t,F as u,D as d,v as k,E as l,Y as P,Z as y,_ as T,$ as A,a0 as E,a1 as B,a2 as L,a3 as V,a4 as D,a5 as F,a6 as W,a7 as M,a8 as N}from"./index-DlZXj8Km.js";import{s as O}from"./index-DXmzaT4Q.js";const q={class:"my-2"},H={class:"table table-sm table-bordered"},Q={key:0},U={class:"col-4"},X={class:"col-2"},Y={class:"col-2"},Z={class:"col-2"},z={class:"me-2"},G=["href"],I={class:"table table-sm table-bordered"},J={key:0},K={class:"col-4"},R={class:"col-2"},j={class:"col-2"},tt={class:"col-2"},st={class:"me-2"},et=["href"],at={class:"table table-sm table-bordered"},rt={class:"col-4"},ot={class:"col-2"},nt={class:"me-2"},ct=["href"],lt={__name:"Crawler",setup(m){$(),S(),x(()=>{console.log("startCrawler")}),C(()=>{});const i=b({}),_=b({});function v(a){return new Promise(async(r,o)=>{try{const e=await fetch(a);if(!e.ok)return o({status:e.status,statusText:e.statusText,error:`HTTP ${e.status}`});const s=await e.text(),g=[...new DOMParser().parseFromString(s,"text/html").querySelectorAll("a")].map(w=>w.getAttribute("href")).filter(Boolean);r(g)}catch(e){o({status:null,statusText:null,error:e.message})}})}async function f(a,r){if(["#","/a_dmin","/f_ilament"].some(s=>a.startsWith(s)))return;if(["//","http://","https://"].some(s=>a.startsWith(s))){debugger;_.value?.[a]==null&&(_.value[a]=[]),_.value[a].push(r);return}if(i.value?.[a]!=null){i.value?.[a].parent.push(r);return}i.value[a]={status:"reading",check:"unknown",parentArr:[r]};try{const s=await v(a);i.value[a].check="ok";for(const p of s)i.value?.[p]||await f(p,a)}catch(s){i.value[a].check=s.error}finally{i.value[a].status="done"}}return(a,r)=>(c(),n(u,null,[r[1]||(r[1]=t("h1",null,"Crawler",-1)),t("div",q,[t("button",{class:"btn btn-primary fas fa-angle-right",onClick:r[0]||(r[0]=o=>f("/",""))})]),r[2]||(r[2]=t("h3",null,"Error",-1)),t("table",H,[t("tbody",null,[(c(!0),n(u,null,d(i.value,(o,e)=>(c(),n(u,{key:e},[o.check!="ok"?(c(),n("tr",Q,[t("td",U,l(e),1),t("td",X,l(o.status),1),t("td",Y,l(o.check),1),t("td",Z,[(c(!0),n(u,null,d(o.parentArr,s=>(c(),n("span",z,[t("a",{href:s},l(s),9,G)]))),256))])])):k("",!0)],64))),128))])]),r[3]||(r[3]=t("h3",null,"Ok",-1)),t("table",I,[t("tbody",null,[(c(!0),n(u,null,d(i.value,(o,e)=>(c(),n(u,{key:e},[o.check=="ok"?(c(),n("tr",J,[t("td",K,l(e),1),t("td",R,l(o.status),1),t("td",j,l(o.check),1),t("td",tt,[(c(!0),n(u,null,d(o.parentArr,s=>(c(),n("span",st,[t("a",{href:s},l(s),9,et)]))),256))])])):k("",!0)],64))),128))])]),r[4]||(r[4]=t("h2",null,"External",-1)),t("table",at,[t("tbody",null,[(c(!0),n(u,null,d(_.value,(o,e)=>(c(),n("tr",{key:e},[t("td",rt,l(e),1),t("td",ot,[(c(!0),n(u,null,d(o,s=>(c(),n("span",nt,[t("a",{href:s},l(s),9,ct)]))),256))])]))),128))])])],64))}},it=[y,T,A,E,B,L,V,D,F,O],h=P(lt);it.forEach(m=>{h.component(m.name,m)});h.use(W,{theme:{preset:M,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});h.use(N);h.use(y);h.mount("#crawler");
