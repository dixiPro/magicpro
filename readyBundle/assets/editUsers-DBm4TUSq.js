import{u as B,r as p,N as F,U as L,D as S,l as c,p as d,q as e,H as x,F as k,C as I,z as r,v as y,G as M,s as C,J as q,x as _,y as h,_ as z,ad as G,Z as H,$,a0 as J,a1 as P,a2 as Q,a3 as R,a4 as Z,a5 as j,a6 as K,a7 as O,a8 as W,a9 as X,aa as Y,ab as ee}from"./translate-ACaeD73l.js";import{s as te}from"./index-pJ5qO2LS.js";const se={class:"container my-3"},ae={class:"col-1"},oe=["onClick"],ne={class:"col-1"},le=["textContent"],re={class:"col-2"},ie=["textContent"],ce={class:"col-2"},de=["textContent"],ue={class:"col-2"},me=["textContent"],ve={class:"col-2"},pe=["textContent"],_e={key:0,class:"col-1"},he=["onClick"],fe={class:"my-3 text-center"},we={class:"my-2"},be={class:"my-2"},ye={class:"my-2"},Ce={__name:"EditUsers",setup(f){const{t:l}=B(),i=p([]),w=p(!1),n=p({name:"newUser",email:"barsik@barsik.com",password:"1234",role:"user"});let U=0;const o=p({show:!1,mode:null,header:null,button:null});async function m(t){const s="/a_dmin/api/editUsers";if(!w.value)try{return w.value=!0,(await G({url:s,data:t,logResult:!1})).data}catch(v){throw document.showToast(v,"error"),new Error(l("error"))}finally{w.value=!1}}async function g(){try{i.value=(await m({command:"getUserList",data:{}})).map(t=>(t.edit=!1,t)),document.showToast(l("user_list_loaded"))}catch{}}async function V(){if(await document.confirmDialog(l("save")))try{const t=await m({command:"editUser",data:n.value});t.edit=!1,console.log(t),i.value[U]=t,n.value=t,document.showToast(l("saved"))}catch{}}async function D(t){if(await document.confirmDialog(l("delete")))try{const s=await m({command:"deleteUser",data:{id:i.value[t].id}});i.value.splice(t,1)}catch{}}function E(t){U=t,n.value=i.value[t],o.value.show=!0,o.value.header=l("edit"),o.value.mode="edit",o.value.header=l("save")}function T(){n.value={name:"newUser",email:"barsik@barsik.com",password:"1234",role:"user"},o.value.show=!0,o.value.header=l("create"),o.value.mode="add",o.value.header=l("create")}async function N(){try{const t=await m({command:"addUser",data:n.value});t.edit=!1,i.value.push(t),o.value.show=!1}catch{}}return F(()=>{g()}),L(()=>{}),(t,s)=>{const v=S("Dialog");return d(),c(k,null,[e("div",se,[(d(!0),c(k,null,I(i.value,(a,b)=>(d(),c("div",{key:b,class:"row my-2"},[e("div",ae,[e("button",{onClick:A=>E(b),class:"fas fa-edit btn btn-sm btn-success"},null,8,oe)]),e("div",ne,[e("span",{textContent:r(a.id)},null,8,le)]),e("div",re,[e("span",{textContent:r(a.name)},null,8,ie)]),e("div",ce,[e("span",{textContent:r(a.email)},null,8,de)]),e("div",ue,[e("span",{textContent:r(a.password)},null,8,me)]),e("div",ve,[e("span",{textContent:r(a.role)},null,8,pe)]),a.edit?C("",!0):(d(),c("div",_e,[e("button",{class:"fas fa-trash btn btn-sm btn-success",onClick:A=>D(b)},null,8,he)]))]))),128)),e("div",fe,[e("button",{class:"btn btn-sm btn-success",onClick:s[0]||(s[0]=a=>T())},r(y(l)("add")),1)])]),x(v,{visible:o.value.show,"onUpdate:visible":s[5]||(s[5]=a=>o.value.show=a),header:o.value.header,modal:"",style:{width:"400px"}},{default:M(()=>[e("div",null,[s[6]||(s[6]=q("name ",-1)),_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=a=>n.value.name=a),placeholder:"name"},null,512),[[h,n.value.name]])]),e("div",we,[_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=a=>n.value.email=a),placeholder:"email"},null,512),[[h,n.value.email]])]),e("div",be,[_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=a=>n.value.password=a),placeholder:"password"},null,512),[[h,n.value.password]])]),e("div",ye,[_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=a=>n.value.role=a),placeholder:"password"},null,512),[[h,n.value.role]])]),o.value.mode==="add"?(d(),c("button",{key:0,class:"btn btn-sm btn-success",onClick:N},r(y(l)("create")),1)):C("",!0),o.value.mode==="edit"?(d(),c("button",{key:1,class:"btn btn-sm btn-success",onClick:V},r(y(l)("save")),1)):C("",!0)]),_:1},8,["visible","header"]),x(z)],64)}}},Ue=[$,J,P,Q,R,Z,j,K,O,te],u=H(Ce);Ue.forEach(f=>{u.component(f.name,f)});u.use(W,{theme:{preset:X,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});u.use(Y);u.use($);u.use(ee);u.mount("#edit_users");
