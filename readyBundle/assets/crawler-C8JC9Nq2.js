import{V as w,W as S,P as $,X as x,b,c as l,o as c,a as t,F as d,D as m,E as i,Y as P,Z as v,_ as T,$ as C,a0 as A,a1 as B,a2 as E,a3 as L,a4 as D,a5 as F,a6 as N,a7 as O,a8 as V}from"./index-DlZXj8Km.js";import{s as W}from"./index-DXmzaT4Q.js";const J={class:"my-2"},M={class:"table table-sm table-bordered"},q={class:"col-4"},H={class:"col-2"},Q={class:"col-2"},U={class:"col-2"},X={class:"me-2"},Y=["href"],Z={class:"table table-sm table-bordered"},z={class:"col-4"},G={class:"col-2"},I={class:"me-2"},K=["href"],R={__name:"Crawler",setup(h){w(),S(),$(()=>{console.log("startCrawler")}),x(()=>{});const o=b({}),u=b({});function k(s){return new Promise(async(r,n)=>{try{const a=await fetch(s);if(!a.ok)return n({status:a.status,statusText:a.statusText,error:`HTTP ${a.status}`});const e=await a.text(),g=[...new DOMParser().parseFromString(e,"text/html").querySelectorAll("a")].map(y=>y.getAttribute("href")).filter(Boolean);r(g)}catch(a){n({status:null,statusText:null,error:a.message})}})}async function _(s,r){if(["#","/a_dmin","f_ilament"].some(e=>s.startsWith(e)))return;if(["//","http://","https://"].some(e=>s.startsWith(e))){debugger;u.value?.[s]==null&&(u.value[s]=[]),u.value[s].push(r);return}if(o.value?.[s]!=null){o.value?.[s].parent.push(r);return}o.value[s]={status:"reading",check:"unknown",parentArr:[r]};try{const e=await k(s);o.value[s].check="ok";for(const f of e)o.value?.[f]||await _(f,s)}catch(e){o.value[s].check=e.error}finally{o.value[s].status="done"}}return(s,r)=>(c(),l(d,null,[r[1]||(r[1]=t("h1",null,"Crawler",-1)),t("div",J,[t("button",{class:"btn btn-primary fas fa-angle-right",onClick:r[0]||(r[0]=n=>_("/",""))})]),t("table",M,[t("tbody",null,[(c(!0),l(d,null,m(o.value,(n,a)=>(c(),l("tr",{key:a},[t("td",q,i(a),1),t("td",H,i(n.status),1),t("td",Q,i(n.check),1),t("td",U,[(c(!0),l(d,null,m(n.parentArr,e=>(c(),l("span",X,[t("a",{href:e},i(e),9,Y)]))),256))])]))),128))])]),r[2]||(r[2]=t("h2",null,"External",-1)),t("table",Z,[t("tbody",null,[(c(!0),l(d,null,m(u.value,(n,a)=>(c(),l("tr",{key:a},[t("td",z,i(a),1),t("td",G,[(c(!0),l(d,null,m(n,e=>(c(),l("span",I,[t("a",{href:e},i(e),9,K)]))),256))])]))),128))])]),t("pre",null,"      "+i(JSON.stringify(u.value,null,2))+`
      `,1),t("pre",null,"      "+i(JSON.stringify(o.value,null,2))+`
      `,1)],64))}},j=[v,T,C,A,B,E,L,D,F,W],p=P(R);j.forEach(h=>{p.component(h.name,h)});p.use(N,{theme:{preset:O,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});p.use(V);p.use(v);p.mount("#crawler");
