import{V as w,W as g,P as y,X as $,b as S,c,o as i,a as r,F as m,D as d,E as l,Y as T,Z as h,_ as b,$ as x,a0 as C,a1 as A,a2 as P,a3 as B,a4 as D,a5 as E,a6 as F,a7 as L,a8 as V}from"./index-DlZXj8Km.js";import{s as M}from"./index-DXmzaT4Q.js";const N={class:"my-2"},O={class:"col-4"},W={class:"col-2"},q={class:"col-2"},H={class:"col-2"},J={class:"me-2"},Q=["href"],U={__name:"Crawler",setup(p){w(),g(),y(()=>{console.log("startCrawler")}),$(()=>{});const e=S({});function _(t){return new Promise(async(a,n)=>{try{const s=await fetch(t);if(!s.ok)return n({status:s.status,statusText:s.statusText,error:`HTTP ${s.status}`});const o=await s.text(),v=[...new DOMParser().parseFromString(o,"text/html").querySelectorAll("a")].map(k=>k.getAttribute("href")).filter(Boolean);a(v)}catch(s){n({status:null,statusText:null,error:s.message})}})}async function f(t,a){if(!["#","/a_dmin","f_ilament"].some(s=>t.startsWith(s))){if(e.value?.[t]==!0){e.value?.[t].parent.push(a);return}e.value[t]={status:"reading",check:"unknown",parentArr:[a]};try{const s=await _(t);e.value[t].check="ok";for(const o of s)e.value?.[o]||await f(o,t)}catch(s){e.value[t].check=s.error}finally{e.value[t].status="done"}}}return(t,a)=>(i(),c(m,null,[a[1]||(a[1]=r("h1",null,"Crawler",-1)),r("div",N,[r("button",{class:"btn btn-primary fas fa-angle-right",onClick:a[0]||(a[0]=n=>f("/",""))})]),(i(!0),c(m,null,d(e.value,(n,s)=>(i(),c("div",{class:"row",key:s},[r("div",O,l(s),1),r("div",W,l(n.status),1),r("div",q,l(n.check),1),r("div",H,[(i(!0),c(m,null,d(n.parentArr,o=>(i(),c("span",J,[r("a",{href:o},l(o),9,Q)]))),256))])]))),128)),r("pre",null,"      "+l(JSON.stringify(e.value,null,2))+`
      `,1)],64))}},X=[h,b,x,C,A,P,B,D,E,M],u=T(U);X.forEach(p=>{u.component(p.name,p)});u.use(F,{theme:{preset:L,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});u.use(V);u.use(h);u.mount("#crawler");
