{"version":3,"file":"crawler-uVmAkggC.js","sources":["../../../../packages/dixipro/magicpro/admin/js/app/Crawler/component/LoadingButton.vue","../../../../packages/dixipro/magicpro/admin/js/app/Crawler/Crawler.vue","../../../../packages/dixipro/magicpro/admin/js/crawler.js"],"sourcesContent":["<script setup>\nimport { ref, computed, onMounted, onUnmounted, watch, useId, toRaw, unref } from 'vue';\n\nconst props = defineProps({\n  action: Function, // async функция\n});\n\nconst loading = ref(false);\n\nasync function handleClick() {\n  loading.value = true;\n  try {\n    await props.action();\n  } finally {\n    loading.value = false;\n  }\n}\n</script>\n\n<template>\n  <button :disabled=\"loading\" @click=\"handleClick\" class=\"btn btn-primary\">\n    <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-2\"></span>\n    <slot></slot>\n  </button>\n</template>\n","<script setup>\nimport { ref, computed, onMounted, onUnmounted, nextTick, watch, useId, toRaw, unref } from 'vue';\nimport { apiSetup, apiCall } from '../apiCall';\n\nimport { useToast } from 'primevue/usetoast';\nconst toast = useToast();\nimport { useConfirm } from 'primevue/useconfirm';\nconst confirm = useConfirm();\n\nconst iniParams = ref({});\n\nconst ready = ref(false);\n\n// результаты\nconst result = ref({});\n// внешние ссылки\nconst extrnalLink = ref({});\n// экстренный стоп\nconst stop = ref(false);\n// статус обхода\nconst status = ref('start');\n// статус кеша\n\nconst storageDirStatus = ref(false);\nconst publicDirStatus = ref(false);\n\nlet arrSkip = []; // пропускаем сканирование\n\nconst externalProtocol = ['//', 'http://', 'https://']; // внешние ссылки\n\nimport LoadingButton from './component/LoadingButton.vue';\n\nonMounted(() => {\n  console.log('startCrawler');\n  getIniParams();\n\n  // глобальные сервисы диалог подтверждения и тосты\n  document.showToast = (msg = '', severity = 'success') => {\n    const life = severity === 'success' ? 5000 : 60 * 1000;\n    toast.add({ severity: severity, detail: msg, life: life });\n    if (severity === 'error') {\n      console.log(msg);\n    }\n  };\n  document.confirmDialog = async (message) => {\n    return new Promise((resolve, reject) => {\n      confirm.require({\n        message,\n        header: '',\n        icon: 'fas fa-question',\n        acceptLabel: 'Да',\n        rejectLabel: 'Нет',\n        accept: () => resolve(true),\n        reject: () => resolve(false), // или reject(), если хотите ошибку\n      });\n    });\n  };\n});\n\nasync function getIniParams() {\n  try {\n    ready.value = false;\n    await nextTick();\n    const res = await apiSetup({\n      command: 'getIniParams',\n    });\n    iniParams.value = res;\n    arrSkip = res.EXCLUDED_ROUTES;\n    arrSkip.push('#');\n\n    const dirStatus = await apiSetup({\n      command: 'getDirStatus',\n    });\n    storageDirStatus.value = dirStatus.storageDirStatus;\n    publicDirStatus.value = dirStatus.publicDirStatus;\n\n    await nextTick();\n    ready.value = true;\n  } catch (error) {}\n}\n\nasync function wait(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nonUnmounted(() => {});\n\n//\nasync function checkUrlByPhp(url) {\n  const response = await apiSetup({\n    command: 'processUrl',\n    url: url,\n  });\n  return response;\n}\n\n//\nfunction fixUrl(url) {\n  try {\n    return new URL(url).href; // абсолютный → не трогаем\n  } catch {\n    return new URL(url, location.origin).href; // относительный → добавим домен\n  }\n}\n\n//\nasync function getLinks(url) {\n  if (stop.value) return;\n\n  const res = await checkUrlByPhp(fixUrl(url));\n  if (!res.check) {\n    throw new Error(res.code);\n  }\n  const html = res.body;\n  const doc = new DOMParser().parseFromString(html, 'text/html');\n  const links = [...doc.querySelectorAll('a')].map((a) => a.getAttribute('href')).filter(Boolean);\n  return links;\n}\n\n//\n//\nasync function start() {\n  if (stop.value) return;\n  result.value = {};\n  extrnalLink.value = {};\n  status.value = 'working';\n\n  await deleteFromStorage();\n\n  await go('/', '');\n\n  for (const el of iniParams.value.RENDER_URL) {\n    await go(el, '');\n  }\n\n  let sorted = {};\n  Object.keys(result.value)\n    .sort()\n    .forEach((k) => {\n      sorted[k] = result.value[k];\n    });\n\n  result.value = sorted;\n\n  await checkExternal();\n\n  sorted = {};\n  Object.keys(extrnalLink.value)\n    .sort()\n    .forEach((k) => {\n      sorted[k] = extrnalLink.value[k];\n    });\n\n  extrnalLink.value = sorted;\n  status.value = 'end';\n  await getIniParams();\n}\n\nasync function checkExternal() {\n  if (stop.value) return;\n  for (let key in extrnalLink.value) {\n    const res = await checkUrlByPhp(key);\n    extrnalLink.value[key].status = 'done';\n    extrnalLink.value[key].check = res.check ? 'ok' : res.code;\n  }\n}\n\nasync function go(url, parent) {\n  if (stop.value) return;\n  // админка\n  if (arrSkip.some((el) => url.startsWith(el))) {\n    return;\n  }\n\n  // внешние ссылки\n  if (externalProtocol.some((el) => url.startsWith(el))) {\n    if (!(url in extrnalLink.value)) {\n      extrnalLink.value[url] = {\n        status: 'reading',\n        check: 'unknown',\n        parentArr: [],\n      };\n    }\n    extrnalLink.value[url].parentArr.push(parent);\n    return;\n  }\n\n  // ссылку проверели\n  if (url in result.value) {\n    // добавляем родителей только с ошибками\n    if (result.value[url].check != 'ok') {\n      result.value[url].parentArr.push(parent);\n    }\n    return;\n  }\n\n  result.value[url] = {\n    status: 'reading',\n    check: 'unknown',\n    parentArr: [parent],\n  };\n  try {\n    const arr = await getLinks(url);\n    // console.log('url=', url, 'arr', arr);\n    result.value[url].check = 'ok';\n\n    for (const el of arr) {\n      if (stop.value) return;\n      await go(el, url);\n    }\n  } catch (error) {\n    result.value[url].check = error.message;\n  } finally {\n    result.value[url].status = 'done';\n  }\n}\n\nasync function deleteFromStorage() {\n  await apiSetup({\n    command: 'deleteFromStorage',\n  });\n  document.showToast('Storage удален');\n  await getIniParams();\n}\n\nasync function deleteFromPublic() {\n  await apiSetup({\n    command: 'deleteFromPublic',\n  });\n  document.showToast('Public удален');\n  await getIniParams();\n}\n\nasync function startHtmlCache() {\n  await apiSetup({\n    command: 'startHtmlCache',\n  });\n  await getIniParams();\n  document.showToast('Кеш опубликован');\n}\n\nasync function listCacheFiles() {\n  const response = await apiSetup({\n    command: 'listCacheFiles',\n  });\n\n  result.value = {};\n  extrnalLink.value = {};\n  response.forEach((el) => {\n    result.value[el] = {\n      status: 'file',\n      check: 'ok',\n      parentArr: [],\n    };\n  });\n  status.value = 'end';\n  document.showToast('кеш считан');\n}\n\nconst hasInternalError = computed(() => {\n  for (const key in result.value) {\n    if (result.value[key]?.check != 'ok' && result.value[key]?.check != 'reading') {\n      return true;\n    }\n  }\n  return false;\n});\n\nconst hasExternalError = computed(() => {\n  for (const key in extrnalLink.value) {\n    if (result.value[key]?.check != 'ok' && result.value[key]?.check != 'reading') {\n      return true;\n    }\n  }\n  return false;\n});\n</script>\n\n<template>\n  <h1>Crawler 0.81</h1>\n  <div v-if=\"ready\">\n    <div class=\"my-2\">\n      <LoadingButton :action=\"start\">Старт</LoadingButton>\n      <button v-if=\"status == 'working'\" class=\"btn btn-danger fas fa-stop ms-3\" @click=\"stop = true\"></button>\n    </div>\n\n    <div v-if=\"storageDirStatus\">\n      <h4>Кеш создан</h4>\n      <div class=\"my-2\">\n        <LoadingButton :action=\"listCacheFiles\">Показать сторадж</LoadingButton>\n      </div>\n      <div class=\"my-2\">\n        <LoadingButton :action=\"deleteFromStorage\">Удалить сторадж</LoadingButton>\n      </div>\n\n      <div class=\"my-2\">\n        <LoadingButton :action=\"startHtmlCache\">Опубликовать сторадж</LoadingButton>\n      </div>\n    </div>\n    <div v-if=\"publicDirStatus\">\n      <h4>Кеш опубликован</h4>\n      <div class=\"my-2\">\n        <LoadingButton :action=\"deleteFromPublic\">Удалить опубликованный кеш</LoadingButton>\n      </div>\n    </div>\n\n    <div v-if=\"hasInternalError\">\n      <h3>Error</h3>\n      <table class=\"table table-sm table-bordered\">\n        <tbody>\n          <template v-for=\"(val, key) in result\" :key=\"key\">\n            <tr v-if=\"val.check != 'ok'\">\n              <td class=\"link\">\n                <a :href=\"key\" target=\"_blank\">{{ key }}</a>\n              </td>\n              <td>{{ val.status }}</td>\n              <td>{{ val.check }}</td>\n              <td>\n                <span v-for=\"parent in val.parentArr\" class=\"me-2\">\n                  <a :href=\"parent\" target=\"_blank\">{{ parent }}</a>\n                </span>\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n\n    <div v-if=\"Object.keys(result).length > 0\">\n      <h3>Ok</h3>\n      <table class=\"table table-sm table-bordered\">\n        <tbody>\n          <template v-for=\"(val, key) in result\" :key=\"key\">\n            <tr v-if=\"val.check == 'ok'\">\n              <td class=\"link\">\n                <a :href=\"key\" target=\"_blank\">{{ key }}</a>\n              </td>\n              <td>{{ val.status }}</td>\n              <td>{{ val.check }}</td>\n              <td>\n                <span v-for=\"parent in val.parentArr\" class=\"me-2\">\n                  <a :href=\"parent\" target=\"_blank\">{{ parent }}</a>\n                </span>\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n\n    <div v-if=\"hasExternalError\">\n      <h2>External Error</h2>\n      <table class=\"table table-sm table-bordered\">\n        <tbody>\n          <template v-for=\"(val, key) in extrnalLink\" :key=\"key\">\n            <tr v-if=\"val.check != 'ok'\">\n              <td class=\"link\">\n                <a :href=\"key\" target=\"_blank\">{{ key }}</a>\n              </td>\n              <td>{{ val.status }}</td>\n              <td>{{ val.check }}</td>\n              <td>\n                <span v-for=\"parent in val.parentArr\" class=\"me-2\">\n                  <a :href=\"parent\" target=\"_blank\">{{ parent }}</a>\n                </span>\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n    <div v-if=\"Object.keys(extrnalLink).length > 1\">\n      <h2>External OK</h2>\n      <table class=\"table table-sm table-bordered\">\n        <tbody>\n          <template v-for=\"(val, key) in extrnalLink\" :key=\"key\">\n            <tr v-if=\"val.check == 'ok'\">\n              <td class=\"link\">\n                <a :href=\"key\" target=\"_blank\">{{ key }}</a>\n              </td>\n              <td>{{ val.status }}</td>\n              <td>{{ val.check }}</td>\n              <td>\n                <span v-for=\"parent in val.parentArr\" class=\"me-2\">\n                  <a :href=\"parent\" target=\"_blank\">{{ parent }}</a>\n                </span>\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n\n    <pre>\n      {{ JSON.stringify(iniParams, null, 2) }}\n      </pre\n    >\n\n    <!-- <pre>\n      {{ JSON.stringify(result, null, 2) }}\n      </pre\n  > -->\n  </div>\n  <!-- тосты -->\n  <Toast position=\"top-left\"></Toast>\n  <!-- Дилог Да Нет -->\n  <ConfirmDialog></ConfirmDialog>\n</template>\n\n<style scoped>\n.link {\n  overflow: hidden;\n  white-space: nowrap;\n  max-width: 450px;\n}\n.pointer {\n  cursor: pointer;\n}\n</style>\n","import { createApp } from 'vue';\n\nimport PrimeVue from 'primevue/config';\nimport Aura from '@primeuix/themes/aura';\n// import \"primeicons/primeicons.css\";\n\nimport ToastService from 'primevue/toastservice';\nimport Toast from 'primevue/toast';\nimport ConfirmDialog from 'primevue/confirmdialog';\nimport ConfirmationService from 'primevue/confirmationservice';\nimport Dialog from 'primevue/dialog';\nimport Splitter from 'primevue/splitter';\nimport SplitterPanel from 'primevue/splitterpanel';\nimport ContextMenu from 'primevue/contextmenu';\nimport Drawer from 'primevue/drawer';\nimport FileUpload from 'primevue/fileupload';\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\n\nconst components = [\n  //\n  ToastService,\n  Toast,\n  ConfirmDialog,\n  Dialog,\n  Splitter,\n  SplitterPanel,\n  ContextMenu,\n  Drawer,\n  FileUpload,\n  InputText,\n];\n\nimport Crawler from './app/Crawler/Crawler.vue';\nconst app = createApp(Crawler);\n\n// регистрац компонентов\ncomponents.forEach((component) => {\n  app.component(component.name, component);\n});\n\napp.use(PrimeVue, {\n  theme: {\n    preset: Aura,\n    options: {\n      cssLayer: { name: 'primevue', order: 'theme, base, primevue' },\n    },\n  },\n});\n\napp.use(ConfirmationService);\napp.use(ToastService);\n\napp.mount('#crawler');\n"],"names":["props","__props","loading","ref","handleClick","_createElementBlock","_openBlock","_hoisted_2","_renderSlot","_ctx","toast","useToast","confirm","useConfirm","iniParams","ready","result","extrnalLink","stop","status","storageDirStatus","publicDirStatus","arrSkip","externalProtocol","onMounted","getIniParams","msg","severity","life","message","resolve","reject","nextTick","res","apiSetup","dirStatus","onUnmounted","checkUrlByPhp","url","fixUrl","getLinks","html","a","start","deleteFromStorage","go","el","sorted","k","checkExternal","key","parent","arr","error","deleteFromPublic","startHtmlCache","listCacheFiles","response","hasInternalError","computed","hasExternalError","_cache","_createElementVNode","_hoisted_1","_createVNode","LoadingButton","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_Fragment","_renderList","val","_hoisted_11","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_component_Toast","_component_ConfirmDialog","components","ToastService","Toast","ConfirmDialog","Dialog","Splitter","SplitterPanel","ContextMenu","Drawer","FileUpload","InputText","app","createApp","Crawler","component","PrimeVue","Aura","ConfirmationService"],"mappings":"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"}