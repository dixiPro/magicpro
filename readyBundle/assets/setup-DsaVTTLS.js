import{q as h,x,b as r,o,d as e,e as p,w as g,v as w,h as v,F as V,i as E,l as k,y as S,J as U,r as f,g as C,$ as y,_ as T,m as M,j as $,K as N,T as B,L as P,M as q,N as A,O as L,P as D,Q as F,R as I,S as J,U as K,V as O,W as Q}from"./apiCall-CqgbXul4.js";import{s as j}from"./index-DOvAxsD_.js";import{s as R}from"./index-DQnFNzjY.js";import{_ as W}from"./ToastConfirm-CUfgSaVO.js";const z=["disabled"],G={key:0},H={__name:"EditString",props:h({defaultValue:{type:String,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const l=x(t,"modelValue");return(u,a)=>(o(),r(V,null,[e("div",null,[g(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s),disabled:!t.mutable},null,8,z),[[w,l.value]])]),t.mutable?(o(),r("div",G,[e("small",null,v(t.defaultValue),1)])):p("",!0)],64))}},X={key:0},Y={__name:"EditBoolean",props:h({defaultValue:{type:Boolean,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const l=x(t,"modelValue");return(u,a)=>{const s=E("ToggleSwitch");return o(),r(V,null,[e("div",null,[k(s,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=m=>l.value=m),disabled:!t.mutable},null,8,["modelValue","disabled"])]),t.mutable?(o(),r("div",X,[e("small",null,v(t.defaultValue),1)])):p("",!0)],64)}}},Z={style:{display:"inline-block"}},ee={__name:"DeleteButton",props:{action:Function},setup(t){S(()=>{window.addEventListener("keydown",l)}),U(()=>{window.removeEventListener("keydown",l)});function l(c){c.key==="Escape"&&(a.value=!1,s.value=!1)}const u=t,a=f(!1),s=f(!1);async function m(){if(a.value&&s.value){u.action(),a.value=!1,s.value=!1;return}a.value=!0,setTimeout(()=>{s.value=!0},500)}return(c,i)=>(o(),r("div",Z,[a.value?(o(),r("button",{key:0,onClick:i[0]||(i[0]=n=>a.value=!a.value),class:"fas fa-times btn btn-sm"})):p("",!0),e("button",{onClick:m,class:"fas fa-trash btn btn-sm"})]))}},te={class:"col-12"},le={class:"input-group input-group-sm"},ae=["onUpdate:modelValue","disabled"],se={class:"row my-1"},ne={class:"col-12"},ue={class:"input-group input-group-sm"},oe=["disabled"],ie={__name:"EditArray",props:h({defaultValue:{type:Array,required:!0},mutable:{type:Boolean,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const l=x(t,"modelValue");function u(m){l.value.splice(m,1)}function a(){s.value.trim()&&(l.value.push(s.value),s.value="")}const s=f("");return(m,c)=>(o(),r(V,null,[(o(!0),r(V,null,C(l.value,(i,n)=>(o(),r("div",{key:n,class:"row my-1"},[e("div",te,[e("div",le,[g(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":d=>l.value[n]=d,disabled:!t.mutable},null,8,ae),[[w,l.value[n]]]),k(ee,{action:()=>u(n)},null,8,["action"])])])]))),128)),e("div",se,[e("div",ne,[e("div",ue,[g(e("input",{type:"text",class:"form-control form-sm","onUpdate:modelValue":c[0]||(c[0]=i=>s.value=i),disabled:!t.mutable},null,8,oe),[[w,s.value]]),e("button",{class:"btn btn-sm fas fa-plus pointer",onClick:c[1]||(c[1]=i=>a())})])])])],64))}},re={key:0},de={class:"col-3"},me=["textContent"],ce={style:{"line-height":"1"}},pe=["textContent"],ve={class:"col-md-5"},fe={__name:"Setup",setup(t){const l=f({}),u=f({}),a=f(!1);S(()=>{s()}),U(()=>{});async function s(){l.value=await y({command:"getParamsAttr"}),u.value=await y({command:"getIniParams"}),await T(),a.value=!0}async function m(){await document.confirmDialog("Сохранить?")&&(u.value=await y({command:"saveIniParams",allVars:u.value}),document.showToast("Сохранено"),await s())}return(c,i)=>(o(),r(V,null,[i[1]||(i[1]=e("h1",null,"Setup 0.1",-1)),a.value?(o(),r("div",re,[(o(!0),r(V,null,C(l.value,(n,d)=>(o(),r("div",{class:"row my-3",key:d},[e("div",de,[e("div",null,[e("strong",{textContent:v(d)},null,8,me)]),e("div",ce,[e("small",{textContent:v(n.label)},null,8,pe)])]),e("div",ve,[n.type=="localpath"||n.type=="string"?(o(),$(H,{key:0,modelValue:u.value[d],"onUpdate:modelValue":b=>u.value[d]=b,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0),n.type=="boolean"?(o(),$(Y,{key:1,modelValue:u.value[d],"onUpdate:modelValue":b=>u.value[d]=b,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0),n.type=="array"?(o(),$(ie,{key:2,modelValue:u.value[d],"onUpdate:modelValue":b=>u.value[d]=b,defaultValue:n.default,mutable:n.mutable},null,8,["modelValue","onUpdate:modelValue","defaultValue","mutable"])):p("",!0)])]))),128)),e("div",{class:"row"},[i[0]||(i[0]=e("div",{class:"col-3"},null,-1)),e("div",{class:"col-md-5"},[e("button",{class:"btn btn-sm btn-success",onClick:m},"Сохранить")])])])):p("",!0),e("pre",null,"      "+v(JSON.stringify(u.value,null,2))+`
      `,1),i[2]||(i[2]=M(" paramsAttr ",-1)),e("pre",null,"      "+v(JSON.stringify(l.value,null,2))+`
      `,1),k(W)],64))}},Ve=[B,P,q,A,L,D,F,I,J,R,j],_=N(fe);Ve.forEach(t=>{_.component(t.name,t)});_.use(K,{theme:{preset:O,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});_.use(Q);_.use(B);_.mount("#setup");
